<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="Browse our collection of high-quality products with detailed descriptions, pricing, and categories."
    />
    <meta name="keywords" content="products, shop, online store, e-commerce" />
    <meta name="theme-color" content="#2563eb" />
    <title>Product Catalog - Shop Online</title>
    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <!-- Font Awesome for Icons -->
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="style.css" />
    <script defer src="main.js"></script>
  </head>
  <body>
    <div class="container py-4">
      <!-- Header -->
      <div class="text-center mb-4">
        <h1 class="h2 fw-bold text-primary mb-1">
          <i class="fas fa-store me-2"></i>Product Catalog
        </h1>
        <p class="text-muted mb-0">Manage and search products efficiently</p>
      </div>

      <!-- Search & Filter Section -->
      <div class="card mb-4 shadow-sm">
        <div class="card-body">
          <div class="row g-3 align-items-center">
            <!-- Search Input -->
            <div class="col-lg-5">
              <label class="form-label small text-muted mb-1"
                >Search Product</label
              >
              <div class="input-group">
                <span class="input-group-text bg-white">
                  <i class="fas fa-search text-muted"></i>
                </span>
                <input
                  type="text"
                  id="searchInput"
                  class="form-control"
                  placeholder="Search by product name..."
                  onchange="searchProducts()"
                  oninput="searchProducts()"
                />
              </div>
            </div>

            <!-- Sort Buttons -->
            <div class="col-lg-7">
              <label class="form-label small text-muted mb-1">Sort By</label>
              <div class="btn-group w-100" role="group">
                <!-- Sort by Name -->
                <button
                  type="button"
                  class="btn btn-outline-primary btn-sm"
                  onclick="sortByName('asc')"
                  title="Sort by name A-Z"
                >
                  <i class="fas fa-arrow-up-a-z me-1"></i>Name A-Z
                </button>
                <button
                  type="button"
                  class="btn btn-outline-primary btn-sm"
                  onclick="sortByName('desc')"
                  title="Sort by name Z-A"
                >
                  <i class="fas fa-arrow-down-z-a me-1"></i>Name Z-A
                </button>

                <!-- Sort by Price -->
                <button
                  type="button"
                  class="btn btn-outline-success btn-sm"
                  onclick="sortByPrice('asc')"
                  title="Sort by price low to high"
                >
                  <i class="fas fa-arrow-up me-1"></i>Price ↑
                </button>
                <button
                  type="button"
                  class="btn btn-outline-success btn-sm"
                  onclick="sortByPrice('desc')"
                  title="Sort by price high to low"
                >
                  <i class="fas fa-arrow-down me-1"></i>Price ↓
                </button>

                <!-- Create Product Button -->
                <button
                  type="button"
                  class="btn btn-success btn-sm"
                  onclick="openCreateModal()"
                  title="Create new product"
                >
                  <i class="fas fa-plus me-1"></i>Create Product
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Results Info -->
      <div class="card mb-3 border-0 shadow-sm">
        <div class="card-body py-2">
          <div class="d-flex justify-content-between align-items-center">
            <div class="d-flex align-items-center gap-3">
              <small class="text-dark fw-medium">
                <i class="fas fa-box me-1 text-primary"></i>Showing
                <span id="resultCount" class="fw-bold text-primary">0</span>
                products
              </small>
              <div class="d-flex align-items-center gap-2">
                <small class="text-dark fw-medium">Items per page:</small>
                <select
                  id="itemsPerPage"
                  class="form-select form-select-sm"
                  style="width: auto"
                  onchange="changeItemsPerPage()"
                >
                  <option value="5">5</option>
                  <option value="10" selected>10</option>
                  <option value="20">20</option>
                  <option value="50">50</option>
                </select>
              </div>
            </div>
            <small class="text-dark">
              <i class="fas fa-clock me-1 text-success"></i>Last updated:
              <span id="lastUpdated" class="fw-medium"></span>
            </small>
          </div>
        </div>
      </div>

      <!-- Products Table -->
      <div class="table-responsive">
        <table
          class="table table-hover table-striped align-middle"
          id="productsTable"
        >
          <thead class="table-dark">
            <tr>
              <th scope="col" style="width: 80px" class="text-center">Image</th>
              <th scope="col">Product Name</th>
              <th scope="col" style="width: 120px">Category</th>
              <th scope="col" style="width: 300px">Description</th>
              <th scope="col" style="width: 100px" class="text-end">Price</th>
              <th scope="col" style="width: 150px" class="text-center">
                Actions
              </th>
            </tr>
          </thead>
          <tbody id="productContainer"></tbody>
        </table>
      </div>

      <!-- Pagination -->
      <nav aria-label="Product pagination">
        <ul class="pagination justify-content-center" id="pagination"></ul>
      </nav>

      <!-- Empty State -->
      <div
        id="emptyState"
        class="alert alert-warning d-none text-center"
        role="alert"
      >
        <i class="fas fa-box-open fa-3x text-muted mb-3"></i>
        <h5 class="alert-heading">No products found</h5>
        <p class="mb-0">
          Try adjusting your search criteria or clear the search filter.
        </p>
      </div>
    </div>

    <!-- Create Product Modal -->
    <div
      class="modal fade"
      id="createProductModal"
      tabindex="-1"
      aria-labelledby="createProductModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header bg-success text-white">
            <h5 class="modal-title" id="createProductModalLabel">
              <i class="fas fa-plus me-2"></i>Create New Product
            </h5>
            <button
              type="button"
              class="btn-close btn-close-white"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
            <form id="createProductForm">
              <div class="mb-3">
                <label for="createTitle" class="form-label">Product Name</label>
                <input
                  type="text"
                  class="form-control"
                  id="createTitle"
                  placeholder="Enter product name"
                  required
                />
              </div>
              <div class="mb-3">
                <label for="createCategory" class="form-label">Category</label>
                <select class="form-select" id="createCategory" required>
                  <option value="">Select a category</option>
                  <option value="Clothes">Clothes</option>
                  <option value="Electronics">Electronics</option>
                  <option value="Shoes">Shoes</option>
                  <option value="Miscellaneous">Miscellaneous</option>
                </select>
              </div>
              <div class="mb-3">
                <label for="createPrice" class="form-label">Price</label>
                <input
                  type="number"
                  class="form-control"
                  id="createPrice"
                  placeholder="Enter price"
                  step="0.01"
                  min="0"
                  required
                />
              </div>
              <div class="mb-3">
                <label for="createImageUrl" class="form-label">Image URL</label>
                <input
                  type="url"
                  class="form-control"
                  id="createImageUrl"
                  placeholder="Enter image URL (optional)"
                />
                <small class="text-muted">Để trống sẽ dùng ảnh mặc định</small>
              </div>
              <div class="mb-3">
                <label for="createDescription" class="form-label"
                  >Description</label
                >
                <textarea
                  class="form-control"
                  id="createDescription"
                  rows="3"
                  placeholder="Enter product description"
                  required
                ></textarea>
              </div>
            </form>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-bs-dismiss="modal"
            >
              Cancel
            </button>
            <button
              type="button"
              class="btn btn-success"
              onclick="submitCreateProduct()"
            >
              <i class="fas fa-check me-1"></i>Create Product
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Edit Product Modal -->
    <div
      class="modal fade"
      id="editProductModal"
      tabindex="-1"
      aria-labelledby="editProductModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header bg-warning text-white">
            <h5 class="modal-title" id="editProductModalLabel">
              <i class="fas fa-edit me-2"></i>Edit Product
            </h5>
            <button
              type="button"
              class="btn-close btn-close-white"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
            <form id="editProductForm">
              <input type="hidden" id="editProductId" />
              <div class="mb-3">
                <label for="editTitle" class="form-label">Product Name</label>
                <input
                  type="text"
                  class="form-control"
                  id="editTitle"
                  placeholder="Enter product name"
                  required
                />
              </div>
              <div class="mb-3">
                <label for="editCategory" class="form-label">Category</label>
                <select class="form-select" id="editCategory" required>
                  <option value="">Select a category</option>
                  <option value="Clothes">Clothes</option>
                  <option value="Electronics">Electronics</option>
                  <option value="Shoes">Shoes</option>
                  <option value="Miscellaneous">Miscellaneous</option>
                </select>
              </div>
              <div class="mb-3">
                <label for="editPrice" class="form-label">Price</label>
                <input
                  type="number"
                  class="form-control"
                  id="editPrice"
                  placeholder="Enter price"
                  step="0.01"
                  min="0"
                  required
                />
              </div>
              <div class="mb-3">
                <label for="editImageUrl" class="form-label">Image URL</label>
                <input
                  type="url"
                  class="form-control"
                  id="editImageUrl"
                  placeholder="Enter image URL (optional)"
                />
                <small class="text-muted"
                  >Để trống sẽ giữ ảnh cũ hoặc dùng ảnh mặc định</small
                >
              </div>
              <div class="mb-3">
                <label for="editDescription" class="form-label"
                  >Description</label
                >
                <textarea
                  class="form-control"
                  id="editDescription"
                  rows="3"
                  placeholder="Enter product description"
                  required
                ></textarea>
              </div>
            </form>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-bs-dismiss="modal"
            >
              Cancel
            </button>
            <button
              type="button"
              class="btn btn-warning"
              onclick="submitEditProduct()"
            >
              <i class="fas fa-save me-1"></i>Save Changes
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Comments Modal -->
    <div
      class="modal fade"
      id="commentsModal"
      tabindex="-1"
      aria-labelledby="commentsModalTitle"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header bg-secondary text-white">
            <h5 class="modal-title" id="commentsModalTitle">
              <i class="fas fa-comments me-2"></i>Comments
            </h5>
            <button
              type="button"
              class="btn-close btn-close-white"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
            <input type="hidden" id="commentsProductId" />

            <!-- Comments List -->
            <div
              id="commentsContainer"
              class="mb-3 max-height-comments overflow-auto"
            ></div>

            <!-- Add Comment Form -->
            <div class="card mt-3">
              <div class="card-body">
                <h6 class="card-title">
                  <i class="fas fa-pen-fancy me-2"></i>Thêm bình luận mới
                </h6>
                <div class="input-group">
                  <textarea
                    class="form-control"
                    id="commentText"
                    placeholder="Nhập bình luận của bạn..."
                    rows="2"
                  ></textarea>
                </div>
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-bs-dismiss="modal"
            >
              Close
            </button>
            <button
              type="button"
              class="btn btn-primary"
              onclick="submitComment()"
            >
              <i class="fas fa-paper-plane me-1"></i>Post Comment
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
